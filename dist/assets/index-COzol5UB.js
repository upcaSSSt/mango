(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const l="AIzaSyAYpFxuD1R8Gcrfg8v6DENS-HwWxqNT9ok",c="147622331730-gn5atqaid2gcgaqu687polg686pup2dq.apps.googleusercontent.com",d="https://www.googleapis.com/discovery/v1/apis/drive/v3/rest",p="https://www.googleapis.com/auth/drive.readonly";let r;function f(a=()=>window.dispatchEvent(new Event("gapiReady"))){window.addEventListener("load",()=>{gapi.load("client",async()=>{await gapi.client.init({apiKey:l,discoveryDocs:[d]}),a()}),r=google.accounts.oauth2.initTokenClient({client_id:c,scope:p})})}function g(){r.callback=async a=>{if(a.error)throw a;localStorage.accessToken=gapi.client.getToken().access_token,await gapi.client.load("drive","v3"),window.dispatchEvent(new Event("gapiReady"))},r.requestAccessToken({prompt:gapi.client.getToken()?"":"consent"})}async function u(a){return URL.createObjectURL(await fetch(`https://www.googleapis.com/drive/v3/files/${a}?alt=media`,{headers:{Authorization:"Bearer "+localStorage.accessToken}}).then(n=>n.blob()))}const m=document.querySelector(".main__container");f(g);window.addEventListener("gapiReady",async()=>{const a=await gapi.client.drive.files.list({q:'name="manga" and mimeType="application/vnd.google-apps.folder" and "root" in parents and trashed=false',fields:"files(id, name)"}),n=await gapi.client.drive.files.list({q:`'${a.result.files[0].id}' in parents and mimeType='application/vnd.google-apps.folder' and trashed=false`,fields:"files(id, name)",orderBy:"name"}),s=await Promise.all(n.result.files.map(async i=>{const e=await gapi.client.drive.files.list({q:`'${i.id}' in parents and mimeType='application/vnd.google-apps.folder' and name='Том 1 Глава 1' and trashed=false`,fields:"files(id, name)"}),t=await gapi.client.drive.files.list({q:`'${e.result.files[0].id}' in parents and name='1.jpg' and mimeType contains 'image/' and trashed=false`,fields:"files(id, name)"});return u(t.result.files[0].id)}));for(let i=0;i<s.length;i++)m.insertAdjacentHTML("beforeend",`<div class="title">        <img class="title__img" src="${s[i]}" alt="${n.result.files[i].name}">        <a class="ref" href="../title.html?title=${n.result.files[i].id}">          ${n.result.files[i].name}        </a>      </div>`)},{once:!0});
